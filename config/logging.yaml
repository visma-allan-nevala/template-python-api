# =============================================================================
# Logging Configuration
# =============================================================================
# Python logging configuration using dictConfig format.
#
# Usage in application:
#   import logging.config
#   import yaml
#
#   with open("config/logging.yaml") as f:
#       config = yaml.safe_load(f)
#   logging.config.dictConfig(config)
# =============================================================================

version: 1
disable_existing_loggers: false

# =============================================================================
# Formatters
# =============================================================================
formatters:
  # Human-readable format for development
  text:
    format: "%(asctime)s | %(levelname)-8s | %(name)s:%(lineno)d | %(message)s"
    datefmt: "%Y-%m-%d %H:%M:%S"

  # JSON format for production (structured logging)
  json:
    class: "pythonjsonlogger.jsonlogger.JsonFormatter"
    format: "%(asctime)s %(levelname)s %(name)s %(message)s"

# =============================================================================
# Handlers
# =============================================================================
handlers:
  # Console handler (stdout)
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: text
    stream: ext://sys.stdout

  # File handler (optional - uncomment to enable)
  # file:
  #   class: logging.handlers.RotatingFileHandler
  #   level: INFO
  #   formatter: json
  #   filename: logs/app.log
  #   maxBytes: 10485760  # 10MB
  #   backupCount: 5

# =============================================================================
# Loggers
# =============================================================================
loggers:
  # Application logger
  src:
    level: DEBUG
    handlers: [console]
    propagate: false

  # FastAPI/Starlette
  uvicorn:
    level: INFO
    handlers: [console]
    propagate: false

  uvicorn.error:
    level: INFO
    handlers: [console]
    propagate: false

  uvicorn.access:
    level: INFO
    handlers: [console]
    propagate: false

  # SQLAlchemy (set to WARNING in production)
  sqlalchemy.engine:
    level: WARNING
    handlers: [console]
    propagate: false

  # HTTP client
  httpx:
    level: WARNING
    handlers: [console]
    propagate: false

  # Reduce noise from third-party libraries
  asyncio:
    level: WARNING
  watchfiles:
    level: WARNING

# =============================================================================
# Root Logger
# =============================================================================
root:
  level: INFO
  handlers: [console]
